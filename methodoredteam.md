## Reconnaissance:

- ipconfig /all
-	whoami /all
-	net localgroup
-	net localgroup “administrators” (admins, administrateurs…)
-	netstat -an
-	tasklist /V
-	net start
-	sc qc
-	systeminfo>output.txt
-	schtasks /query /fo LIST /v
-	wmic qfe get Caption,Description,HotFixID,InstalledOn


###	Reconnaissance (domain et network)

•	arp -a
•	echo %USERDOMAIN%
•	echo %logonserver%
•	net user /domain
•	net group /domain
•	net accounts /domain
•	nltest /domain_trusts


## Enumeration:

-	A avoir http://github.com/winsaafman/Scriptdotsh-ActiveDirectory/raw/master/Microsoft.ActiveDirectory.Management.dll pour powershell
-	https://devblogs.microsoft.com/powershell/powershell-constrained-language-mode/
-	Get-ADGroup -Filter *
-	Get-ADGroup -Filter {Name -like "admin"} | select name, GroupScope
-	Get-ADDomain
-	Get-ADForest
-	Get-ADTrust -Filter *


### LA réf powershell pour attaquer/enumérer AD : http://github.com/PowerShellMafia/PowerSploit/blob/master/Recon/PowerView.ps1 :

-	Get-NetComputer
-	Get-NetDomainController
-	Get-NetGroup
-	Get-NetSession
-	Get-ObjectAcl
-	Find-LocalAdminAccess -Verbose
-	Invoke-EnumerateLocalAdmin -Verbose
Parfois on peut créer un snapshot de l’ad pour une analyse offline : http://docs.microsoft.com/en-us/sysinternals/downloads/adexplorer : http://live.sysinternals.com

Les pistes sont illimitées tout dépend de ce que tu vas trouver dans ces étapes.

## More  

-	tenter de créer un utilisateur : 

```powershell
New-ADUser -Name "stahiri t" -DisplayName "soufiane ta" -SamAccountName “t.soufiane” -UserPrincipalName “t.soufiane@scriptdotsh.local” -GivenName “stahiri” -Surname "man" -AccountPassword (Read-host -AsSecureString “Enter Password”) -Enabled $true -server scriptdotsh.local
```

-	Ou des utilisateurs https://gallery.technet.microsoft.com/office/Create-Contoso-Users-in-3e2f38f2/view/Discussions
-	Vérifier la mauvaise config DHCP execute dhcpmgmt.msc


